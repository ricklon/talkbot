{
  "_comment": "Tool profile experiment matrix (2026-02-27). Tests whether restricting tools to a model's reliable vocabulary improves tool_selection_accuracy and success rate. Each experimental profile pairs with a full-tool baseline from v3-schemas. Four hypotheses tested.",
  "benchmark": {
    "schema_version": "2026.1",
    "values_file": "benchmarks/evaluation_values.json",
    "rubric": {
      "version": "2026.full-suite.v1",
      "weights": {
        "task_success_rate": 0.35,
        "tool_selection_accuracy": 0.2,
        "argument_accuracy": 0.15,
        "recovery_success_rate": 0.1,
        "multistep_success_rate": 0.1,
        "robustness_success_rate": 0.05,
        "context_success_rate": 0.05
      },
      "penalties": {
        "latency_ms_multiplier": 0.002,
        "memory_mb_multiplier": 0.002,
        "tool_error_rate_multiplier": 20.0,
        "model_error_rate_multiplier": 30.0
      }
    }
  },
  "profiles": [
    {
      "_comment": "H1 — qwen3-1.7b LLM: remove noise tools that aren't tested and can't be used correctly (calculator). Does reducing schema noise improve routing for timer/list/memory?",
      "name": "qwen3-1.7b-llm-noise-removed",
      "provider": "local",
      "model": "qwen/qwen3-1.7b",
      "local_model_path": "models/qwen3-1.7b-q4_k_m.gguf",
      "llamacpp_bin": "llama-cli",
      "enable_thinking": false,
      "use_tools": true,
      "system_prompt": "You are being evaluated for tool-use reliability. Always call tools when a request can be solved via tools. For memory/list/timer requests, call tools first and do not answer from chat memory alone. Use exact tool parameter names only.",
      "max_tokens": 256,
      "temperature": 0.0,
      "context_windows": [2048],
      "tool_filter": ["get_current_time", "get_current_date", "set_timer", "cancel_timer", "list_timers", "create_list", "add_to_list", "add_items_to_list", "get_list", "remove_from_list", "clear_list", "list_all_lists", "remember", "recall", "recall_all"],
      "env": {
        "TALKBOT_LOCAL_DIRECT_TOOL_ROUTING": "0"
      }
    },
    {
      "_comment": "H1 control — same model, full tool set (mirrors v3-schemas baseline)",
      "name": "qwen3-1.7b-llm-full-tools",
      "provider": "local",
      "model": "qwen/qwen3-1.7b",
      "local_model_path": "models/qwen3-1.7b-q4_k_m.gguf",
      "llamacpp_bin": "llama-cli",
      "enable_thinking": false,
      "use_tools": true,
      "system_prompt": "You are being evaluated for tool-use reliability. Always call tools when a request can be solved via tools. For memory/list/timer requests, call tools first and do not answer from chat memory alone. Use exact tool parameter names only.",
      "max_tokens": 256,
      "temperature": 0.0,
      "context_windows": [2048],
      "env": {
        "TALKBOT_LOCAL_DIRECT_TOOL_ROUTING": "0"
      }
    },
    {
      "_comment": "H2 — qwen3-8b intent: remove set_reminder (the tool it hallucinates in cross_tool_mix). Can it route to add_to_list if set_reminder is absent?",
      "name": "qwen3-8b-intent-no-reminder",
      "provider": "local",
      "model": "qwen/qwen3-8b",
      "local_model_path": "models/qwen3-8b-q4_k_m.gguf",
      "llamacpp_bin": "llama-cli",
      "enable_thinking": false,
      "use_tools": true,
      "system_prompt": "You are being evaluated for tool-use reliability. Always call tools when a request can be solved via tools. For memory/list/timer requests, call tools first and do not answer from chat memory alone. Use exact tool parameter names only.",
      "max_tokens": 256,
      "temperature": 0.0,
      "context_windows": [4096],
      "tool_filter": ["get_current_time", "get_current_date", "calculator", "set_timer", "cancel_timer", "list_timers", "create_list", "add_to_list", "add_items_to_list", "get_list", "remove_from_list", "clear_list", "list_all_lists", "remember", "recall", "recall_all"],
      "env": {
        "TALKBOT_LOCAL_DIRECT_TOOL_ROUTING": "1"
      }
    },
    {
      "_comment": "H2 control",
      "name": "qwen3-8b-intent-full-tools",
      "provider": "local",
      "model": "qwen/qwen3-8b",
      "local_model_path": "models/qwen3-8b-q4_k_m.gguf",
      "llamacpp_bin": "llama-cli",
      "enable_thinking": false,
      "use_tools": true,
      "system_prompt": "You are being evaluated for tool-use reliability. Always call tools when a request can be solved via tools. For memory/list/timer requests, call tools first and do not answer from chat memory alone. Use exact tool parameter names only.",
      "max_tokens": 256,
      "temperature": 0.0,
      "context_windows": [4096],
      "env": {
        "TALKBOT_LOCAL_DIRECT_TOOL_ROUTING": "1"
      }
    },
    {
      "_comment": "H3 — ollama llama3.2-3b: restrict to tools it reliably dispatches (timer, time/date, calculator, recovery). Remove list and memory tools where it consistently fails argument quality. Does it score higher with a smaller, reliable set?",
      "name": "ollama-llama3.2-3b-core-only",
      "provider": "local_server",
      "model": "llama3.2:3b",
      "local_server_url": "http://localhost:11434/v1",
      "use_tools": true,
      "max_tokens": 512,
      "temperature": 0.3,
      "system_prompt": "You are being evaluated for tool-use reliability. Always call tools when a request can be solved via tools. For memory/list/timer requests, call tools first and do not answer from chat memory alone. Use exact tool parameter names only.",
      "tool_filter": ["get_current_time", "get_current_date", "calculator", "set_timer", "cancel_timer", "list_timers"]
    },
    {
      "_comment": "H3 control",
      "name": "ollama-llama3.2-3b-full-tools",
      "provider": "local_server",
      "model": "llama3.2:3b",
      "local_server_url": "http://localhost:11434/v1",
      "use_tools": true,
      "max_tokens": 512,
      "temperature": 0.3,
      "system_prompt": "You are being evaluated for tool-use reliability. Always call tools when a request can be solved via tools. For memory/list/timer requests, call tools first and do not answer from chat memory alone. Use exact tool parameter names only."
    },
    {
      "_comment": "H4 — ministral-3b: remove all list tools except add_to_list + get_list (remove create_list, clear_list, list_all_lists, add_items_to_list). It confuses list creation and naming. Does a simpler list API fix the naming coherence problem?",
      "name": "ministral-3b-simple-lists",
      "provider": "openrouter",
      "model": "mistralai/ministral-3b-2512",
      "use_tools": true,
      "max_tokens": 512,
      "temperature": 0.0,
      "tool_filter": ["get_current_time", "get_current_date", "calculator", "set_timer", "cancel_timer", "list_timers", "add_to_list", "get_list", "remember", "recall", "recall_all"]
    },
    {
      "_comment": "H4 control",
      "name": "ministral-3b-full-tools",
      "provider": "openrouter",
      "model": "mistralai/ministral-3b-2512",
      "use_tools": true,
      "max_tokens": 512,
      "temperature": 0.0
    }
  ]
}
